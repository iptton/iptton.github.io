> AI 时代 Agent(代理/智能体) 满天飞，那 Agent 到底是什么？
## 什么是程序

说 Agent 前，先说说程序，所有的应用程序，都是一个输入输出的系统，即：对用户输入的内容返回处理后的信息，比如用户输入 `ls -h`，表示执行 `ls` 命令，输入的参数为 `-h`，程序会返回当前目录下的文件列表。
![[Pasted image 20250430114330.png]]

把 LLM 理解成一个普通程序。假设用户输入一个 `你好`，对话式的 LLM 会根据训练的数据生成：`你好，有什么可以帮你`。

![[Pasted image 20250430114405.png]]

## LLM 有记忆吗

以上是 LLM 的基本使用方式，用户输入内容，LLM 返回处理后的信息。我们还需要知道另一个事实，**LLM 并不会对你输入的内容进行记忆**，因此，如果你希望他`记住`，那你需要把前面说过的话再重复发一次给他，你在 LLM 官方 web 平台（或其他 LLM 工具）上看到的对话：

```markdown
You: 你好，我是小明
AI: 你好，小明有什么可以帮你？
You: 我叫什么
AI: 你好，你叫小明
```
本质上是以下两次的 `输入/输出` 过程，用序列图表示如下：

![[Pasted image 20250430114437.png]]

第二次会话，实际上由 web 平台把前面的对话信息拼接在一起，形成一个新的输入，发送给 LLM。也就是说，LLM 是`无状态`的，它并不会记住你之前说过的话。

**大模型应用的官方 web 平台就是一个最简单的 `Agent`**

当我们理解什么叫 `Agent` 后，再看到什么智能体时就不难理解其背后原理了：**帮你把一系列的输入或相关的内容组织起来，然后提供给 LLM 进行处理，最后把 LLM 返回的结果，经过处理后返回给用户**。而复杂点的 Agent 还会对返回的内容再自动地进行二次处理，比如你在多数 web 平台上看到的 markdown 或代码高亮等。而复杂的，如 `cursor` 之类的编程 Agent ，则会要求 LLM 对用户的输入进行分析，并告诉 LLM 它可以用返回的内容告诉我们可以调用哪些工具来完成任务，此时 Agent 会分析返回的内容里有没需要调用工具，如果有，就会调用相应的工具，最后把工具的返回结果再传给 LLM 进行处理，如此反复，直到 LLM 说任务完成了，才结束。

![[Pasted image 20250430114553.png]]

当然以上只是个简单示例，实际上 Agent 还需对输入的上下文进行压缩，优化等处理，提供更多工具调用，要求 LLM 遵循更详细复杂的规则等，最后才能真正实现一个编程助手，这对规则的书写和 LLM 自身的理解能力要求都很高。