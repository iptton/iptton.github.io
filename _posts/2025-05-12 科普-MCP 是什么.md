---
title: "科普 Mcp 是什么"
date: "2025-05-12"
---

> TLDR:
> 本文不涉及 MCP 协议具体实现细节，只希望对 AI 使用者科普 MCP 的本质是什么。
> 
> - MCP 是一个被较多人认可的通信协议，但其并非一个新事物，本质上不会带来什么革命性的变更
> - 使用时 MCP 工具挂得越多，越浪费 token，有可能让你的任务无法完整完成。尽量只打开你可能需要的工具
> - 不要使用不可信来源的 MCP，以免受损


MCP(Model Context Protocol) 是一个开源的协议，旨在简化大语言模型（LLM）和外部工具的通信。MCP 至少有三个角色：Host / Client / Server 。对使用者来说，只需要了解这三个概念即可。

## C/S 架构

MCP 的介绍中大量充斥着 Client Server 这两个词，这很容易给没相关经验的人增加理解的难度。与之对应的是 B/S 架构，即浏览器（Browser）和服务器的架构。一般而言 C/S 架构，强调的是专用的 client ，而 B/S 架构则是强调浏览器的通用性。但不管哪个架构，**对使用者而言，区别只在于，你是下载一个专用的客户端，还是直接在通用的任何一款浏览器中使用**。因此，如果你对这个概念不理解，那你很可能不是开发者，那你完全不需要关心它的内在含义，只需知道一个是提供服务的，一个是使用服务的就行。

## Host/宿主

其中 Host 和 Client 是同一方的，绝大多数情况下，它们其实共存于同一个应用中。即 Host 持有 client，并通过 client 和 server 通信。如下图，表示有两个 MCP 服务在提供服务。

![[Pasted image 20250512113310.png]]

## MCP 和大模型有什么关系

看起来 MCP 就是一个普通的服务提供方？那它是如何和大模型产生关联的？以下是 MCP Server 的描述：

```json
{
  name: "analyze-code",
  description: "Analyze code for potential improvements",
  arguments: [
	{
	  name: "language",
	  description: "Programming language",
	  required: true
	}
  ]
}
```

我们知道**大语言模型能*理解*自然语言**，MCP 约定了一个用自然语言描述什么时候适合调用工具的字段，即上述代码中的 `description` 字段。在 Host 中，我们会把发送给大语言模型的 prompt 中加入这个字段的描述，并**约定**大语言模型如果发现其完成请求需要调用 MCP 时，应**约定**格式返回。这个**加入字段描述和约定返回格式**的工作是由 Host 来完成的，Host 就是一个 Agent（如不了解什么是 Agent 可看我前面发的文章）。当大语言模型发现完成你的请求需要调用某个 MCP 工具时，它会按格式返回，此时 Host 会按**约定的模式**调用 MCP 工具，获取结果后再返回给大语言模型。大语言模型会将这个结果作为上下文的一部分，继续完成请求。

## MCP 工具带来的的问题与风险

MCP 并非新事物，在它之前所有 AI 应用都做过类似的工具，只是 Antropic 这家公司具有较高的行业影响力，它将此通信规范并开源了，几乎成了事实标准，这对所有的工具的 AI 化是有帮助的（相当于书同文）。

### 只开启你所需要的工具

从上一节可知，mcp 的工具描述是用自然语言把**约定**的描述及返回格式一起发给大模型的，这意味着，每多一个工具，就要多一份描述，这些是要占用 token 的，当前大语言模型的一大约束就是上下文窗口大小问题，当你的工具足够多时，可能会导致大语言模型无法完成请求。也就是说，**MCP 挂得越多，越浪费 token，且有可能让你的任务无法完整完成**。比如，我使用的 cloudflare worker mcp ，有 89 个工具之多。可能我只需要它创建一个页面的工具，但其他 88 个工具的描述都会同时被发送给大模型（除非你手动关闭）。

![[Pasted image 20250512121203.png]]

因此，如果你确定你的工作只需要某几个工具，尽量只开启这些工具，比如：
![[Pasted image 20250512121446.png]]

**截图均为 Claude Desktop ，只为示意，不同的应用有不同界面**

### 不使用不可信来源的 MCP

另外，**MCP 的工具描述是用自然语言写的，这意味着，任何人都可以随意添加工具。** 这就导致了一个问题：你无法知道你使用的 MCP 工具是否安全。比如，某个 MCP 工具可能会在 prompt 中要求大语言模型在调用它时，把你的敏感数据传给它，因此，**不要使用不明来源的 MCP，以免受损**。